<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíñ ƒê·ªçc m·ªôt ch√∫t ƒëi n√† üíñ</title>

<style>
body {
  margin: 0;
  background: #fff0f6;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.card {
  background: white;
  width: 90%;
  max-width: 420px;
  border-radius: 30px;
  padding: 24px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  text-align: center;
  position: relative;
}

.text {
  font-size: 22px;
  min-height: 120px;
  margin-bottom: 20px;
  color: #3a173a;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border: none;
  border-radius: 16px;
  font-size: 16px;
  background: #ff7eb3;
  color: white;
  cursor: pointer;
}

button:active {
  transform: scale(0.96);
}

/* RUNG */
@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  50% { transform: translateX(6px); }
  75% { transform: translateX(-6px); }
  100% { transform: translateX(0); }
}

/* TIM BAY */
@keyframes fly {
  to {
    transform: translateY(-80px);
    opacity: 0;
  }
}
</style>
</head>

<body>
<div class="card">
  <div class="text" id="text"></div>
  <div id="choices"></div>
</div>

<script>
// ===== STORY =====
const storyData = [
  {
    text: "√ä m c√≤n nh·ªõ l·∫ßn ƒë·∫ßu ch√∫ng quen nhau kh√¥ng?",
    choices: ["C√ì üíï", "·ªú üòÖ", "CH·ªäU"],
    next: [1, 1, 6]
  },
  {
    text: "B√≠t g√¨ kh√¥ng",
    choices: ["stop", "kh√¥ng n√≥i sao bi·∫øt", "ƒë√©o quan t√¢m"],
    next: [6, 2, 6]
  },
  {
    text: "Gi·ªù sao nh·ªâ.",
    choices: ["Ai m√† bi·∫øt", "Th√¨ n√≥i ƒëi"],
    next: [4, 4]
  },
  {
    text: "T·ªëi ƒëi ch∆°i khum :3üíñ",
    choices: ["Uci (nh·∫Øn mess nha)", "KH√îNG (nh·∫Øn mess ƒëi)"],
    next: [null, null]
  },
  {
    text: "do you want to be my girlfriend. c√≥/ko th√¨ nh·∫Øn mess nha",
    choices: ["TH√å?", "O_O üíñ"],
    next: [5, 3]
  },
  {
    text: ";')))) gi·ªù nh∆∞ tk h·ªÅ",
    choices: ["·ª´", "..."],
    next: [6, 6]
  },
  {
    text: "Th√¥i qu√™n n√≥ ƒëi",
    choices: ["..."],
    next: [null]
  }
];

let index = 0;
let charIndex = 0;
let typingInterval;

const textEl = document.getElementById("text");
const choicesEl = document.getElementById("choices");

// ===== G√ï CH·ªÆ =====
function typeText(text) {
  textEl.innerHTML = "";
  choicesEl.innerHTML = "";
  charIndex = 0;

  typingInterval = setInterval(() => {
    if (charIndex < text.length) {
      textEl.innerHTML += text.charAt(charIndex++);
    } else {
      clearInterval(typingInterval);
      showChoices();
    }
  }, 45);
}

function showChoices() {
  storyData[index].choices.forEach((choice, i) => {
    const btn = document.createElement("button");
    btn.textContent = choice;
    btn.onclick = () => nextScene(i, btn);
    choicesEl.appendChild(btn);
  });
}

function nextScene(i, btn) {
  if (i === 0) heartBurstFromButton(btn, 16);
  if (i === 1) heartBurstFromButton(btn, 8);
  if (i === 2) shakeScreen();

  const next = storyData[index].next[i];
  if (next === null) {
    textEl.innerHTML = "üíñ C·∫£m ∆°n m ƒë√£ ch∆°i üíñ";
    choicesEl.innerHTML = "";
    heartBurstFromButton(btn, 24);
  } else {
    index = next;
    typeText(storyData[index].text);
  }
}

// ===== HI·ªÜU ·ª®NG =====
function shakeScreen() {
  const card = document.querySelector(".card");
  card.style.animation = "shake 0.4s";
  setTimeout(() => card.style.animation = "", 400);
}

function heartBurstFromButton(btn, count) {
  for (let i = 0; i < count; i++) {
    const heart = document.createElement("div");
    heart.textContent = "üíñ";
    heart.style.position = "fixed";
    const rect = btn.getBoundingClientRect();
    heart.style.left = rect.left + rect.width / 2 + "px";
    heart.style.top = rect.top + "px";
    heart.style.fontSize = "18px";
    heart.style.animation = "fly 1s ease-out forwards";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 1000);
  }
}

// ===== START =====
typeText(storyData[0].text);
</script>
</body>
</html>

