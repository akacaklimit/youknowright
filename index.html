<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’– Äá»c má»™t chÃºt Ä‘i nÃ  ğŸ’–</title>

<!-- ===== PWA ===== -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff7eb3">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="pink">

<style>
body {
  margin: 0;
  background: #fff0f6;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.card {
  background: white;
  width: 90%;
  max-width: 420px;
  border-radius: 30px;
  padding: 24px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  text-align: center;
  position: relative;
}

.text {
  font-size: 22px;
  min-height: 120px;
  margin-bottom: 20px;
  color: #3a173a;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border: none;
  border-radius: 16px;
  font-size: 16px;
  background: #ff7eb3;
  color: white;
  cursor: pointer;
}

button:active {
  transform: scale(0.96);
}

/* ===== NÃšT NHáº C ===== */
.music-btn {
  position: absolute;
  top: 16px;
  right: 16px;
  background: #ffd6e7;
  color: #ff3f8b;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  font-size: 20px;
}

@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  50% { transform: translateX(6px); }
  75% { transform: translateX(-6px); }
  100% { transform: translateX(0); }
}
</style>
</head>

<body>
<div class="card">
  <button class="music-btn" id="musicBtn">ğŸµ</button>
  <div class="text" id="text"></div>
  <div id="choices"></div>
</div>

<!-- ğŸµ NHáº C Ná»€N -->
<audio id="bgm" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
// ===== STORY =====
const storyData = [
  {
    text: "ÃŠ m cÃ²n nhá»› láº§n Ä‘áº§u chÃºng quen nhau khÃ´ng?",
    choices: ["CÃ“ ğŸ’•", "á»œ ğŸ˜…", "CHá»ŠU"],
    next: [1, 1, 6]
  },
  {
    text: "BÃ­t gÃ¬ khÃ´ng",
    choices: ["stop", "khÃ´ng nÃ³i sao biáº¿t", "Ä‘Ã©o quan tÃ¢m"],
    next: [6, 2, 6]
  },
  {
    text: "Giá» sao nhá»‰.",
    choices: ["Ai mÃ  biáº¿t", "ThÃ¬ nÃ³i Ä‘i"],
    next: [4, 4]
  },
  {
    text: "Tá»‘i Ä‘i chÆ¡i khum :3(h láº¡i hoÃ£n r ;)))ğŸ’–",
    choices: ["Uci(nháº¯n mess nha)", "KHÃ”NG(nháº¯n mess Ä‘i)"],
    next: [null]
  },
  {
    text: "do you want to be my girlfriend.",
    choices: ["THÃŒ?", "O_O ğŸ’–"],
    next: [5, 3]
  },
  {
    text: ";')))) giá» nhÆ° tk há»",
    choices: ["á»«", "..."],
    next: [6, 6]
  },
  {
    text: "ThÃ´i quÃªn nÃ³ Ä‘i",
    choices: ["..."],
    next: [null]
  }
];

let index = 0;
let charIndex = 0;
let typingInterval;

const textEl = document.getElementById("text");
const choicesEl = document.getElementById("choices");

/* ===== GÃ• CHá»® ===== */
function typeText(text) {
  textEl.innerHTML = "";
  choicesEl.innerHTML = "";
  charIndex = 0;

  typingInterval = setInterval(() => {
    if (charIndex < text.length) {
      textEl.innerHTML += text.charAt(charIndex++);
    } else {
      clearInterval(typingInterval);
      showChoices();
    }
  }, 45);
}

function showChoices() {
  storyData[index].choices.forEach((choice, i) => {
    const btn = document.createElement("button");
    btn.textContent = choice;
    btn.onclick = () => nextScene(i, btn);
    choicesEl.appendChild(btn);
  });
}

function nextScene(i, btn) {
  if (i === 0) heartBurstFromButton(btn, 16);
  if (i === 1) heartBurstFromButton(btn, 6);
  if (i === 2) shakeScreen();

  const next = storyData[index].next[i];
  if (next === null) {
    textEl.innerHTML = "ğŸ’– Cáº£m Æ¡n m Ä‘Ã£ chÆ¡i ğŸ’–";
    choicesEl.innerHTML = "";
    heartBurstFromButton(btn, 30);
  } else {
    index = next;
    typeText(storyData[index].text);
  }
}

/* ===== NHáº C ===== */
const bgm = document.getElementById("bgm");
const musicBtn = document.getElementById("musicBtn");
let musicOn = false;

musicBtn.onclick = () => {
  if (musicOn) {
    bgm.pause();
    musicBtn.textContent = "ğŸ”‡";
  } else {
    bgm.play();
    musicBtn.textContent = "ğŸµ";
  }
  musicOn = !musicOn;
};

// ===== START =====
typeText(storyData[0].text);
</script>
</body>
</html>


